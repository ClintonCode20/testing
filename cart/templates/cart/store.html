{% extends 'base.html' %}

{% block content %}

<div class = 'container'>
    <div class = 'row'>
      
        {% for product in products %}
        <div class = 'col-md-4 col-lg-4'>
          <div class="card" style="width: 18rem;">
              <img src=" {{product.image.url }}" class="card-img-top" alt="...">
              <div class="card-body">
                <h3 class="card-title">{{product.name}}</h3>
                <h4 class="card-text">{{product.price}}</h4>
                <a  class="btn btn-primary addtocart" data-action = "add" data-product ="{{product.product_id}}">Add to Cart</a>
              </div>
            </div>
        </div>
        {% endfor %}
       

        
      

        

       

    </div>
</div>

<!-- <script>
  let btns = document.getElementsByClassName('addtocart')
  for(let i =0; i<btns.length; i++){
    btns[i].addEventListener('click', function(e){
    let product_id = e.target.dataset.product
    let action = e.target.dataset.action
      if(user=="AnonymousUser"){
        console.log('Not Logged in')
      }
      else{
        addToCart(product_id, action)
      }


    })
  }
  
  function addToCart(p_id, acti){
   
    const data = {id:p, action: acti}
        let url = '/updatecart'
        fetch(url, {
            method: 'POST', // or 'PUT'
            headers: {
              'Content-Type': 'application/json',
              'X-CSRFToken': csrftoken
            },
            body: JSON.stringify(data),
          })
          .then(response => response.json())
          .then(data =>{
              console.log(data)
            
          })
          .catch((error) => {
            console.error('Error:', error);
          });

  }
</script> -->


{% endblock %}
